while(the abort button is not pressed) {
   update the current state;
   update the message drawn on the screen;
   
   // Implement the STOP button.
   if(the stop button is pressed) {
    go to the resting state;
    output a message to notify the user;
   }
  }